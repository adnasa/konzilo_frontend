
<div kntnt-article-picker="kntnt-article-picker"></div>
<div class="wrapper">
  <div class="main-content">
    <div ng-class="{ visible: part }" class="list">
      <div class="box pad">
        <div kntnt-clipboard-article-parts="kntnt-clipboard-article-parts" kz-max-height="150" selected="part" link-pattern="#/order/:article/:part" part-created="partCreated"></div>
      </div>
    </div>
    <div class="main-full">
      <div ng-show="!part" class="box pad info-message">
        <h1>{{ "ORDER.TITLE" | translate }}</h1>
        <p>{{ "ORDER.DESCRIPTION" | translate }}</p>
      </div>
      <div ng-show="part" ng-class="{ visible: part }" class="main">
        <div class="box pad">
          <ol ng-show="part" class="breadcrumb">
            <li><a ng-href="#/order">{{'ORDER.TITLE' | translate}}</a></li>
            <li class="active">{{part.article.title}}</li>
            <li ng-show="part" class="active">{{part.title}}</li>
          </ol>
          <h2>{{ "ORDER.PARTDESC" | translate }}</h2>
          <cmf-autosave-status status="autosave"></cmf-autosave-status>
          <form ng-submit="savePart()" name="partForm" class="form form-horizontal">
            <div class="form-group">
              <label for="title" class="control-label">{{ "GLOBAL.WORKINGTITLE" | translate }}</label>
              <div class="controls">
                <input type="text" name="title" ng-model="part.title" required="required"/>
              </div>
            </div>
            <div class="form-group">
              <label for="submitter" class="control-label">{{ "GLOBAL.SUBMITTER" | translate }}</label>
              <div class="controls">
                <entity-reference ng-model="part.submitter" entity-type="Provider"></entity-reference>
              </div>
            </div>
            <div class="form-group">
              <label for="provider" class="control-label">{{ "GLOBAL.PROVIDER" | translate }}</label>
              <div class="controls">
                <entity-reference ng-model="part.provider" entity-type="Provider"></entity-reference>
              </div>
            </div>
            <div class="form-group">
              <label for="deadline" class="control-label">{{ "GLOBAL.DEADLINE" | translate }}</label>
              <div class="controls">
                <div class="publishdate">
                  <input type="text" ng-model="part.deadline" placeholder="{{'GLOBAL.DATE' | translate}}" datepicker-popup="yyyy-MM-dd" ng-change="changeDate()"/>
                </div>
                <div class="publishtime">
                  <input type="text" ng-model="deadlinetime" ng-change="changeTime(deadlinetime, part.deadline)" placeholder="{{'GLOBAL.TIME' | translate}}"/>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="type" class="control-label">{{'GLOBAL.DELIVERY' | translate}}</label>
              <div class="controls">
                <select name="type" ng-model="part.type" ng-options="key as value for (key, value) in types" required="required" ng-disabled="contentSaved(part)"></select>
              </div>
            </div>
            <div class="form-group">
              <label for="language" class="control-label">{{ 'GLOBAL.LANGUAGE' | translate }}</label>
              <div class="controls">
                <select name="language" ng-model="part.language">
                  <option value="{{code}}" ng-repeat="(code, lang) in languages" ng-selected="part.language == code">{{lang.name}}</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="terms" class="control-label">{{ 'GLOBAL.TERMS' | translate }}</label>
              <div class="controls">
                <file-upload-list ng-model="part.terms" bundle="document" preview="false"></file-upload-list>
              </div>
            </div>
            <div class="form-group">
              <label for="assignment" class="control-label">{{ 'GLOBAL.ASSIGNMENT' | translate }}</label>
              <div class="controls">
                <textarea ng-model="part.assignment" placeholder="Beskriv uppdraget hÃ¤r." class="input-block-level"></textarea>
              </div>
            </div>
            <div class="form-group">
              <label for="teaser" class="control-label">{{ 'GLOBAL.DISPLAY' | translate }}</label>
              <div class="controls">
                <label class="checkbox">
                  <input type="checkbox" ng-model="part.teaser"/><span>{{'ORDER.SHOWLISTINGS' | translate}}</span>
                </label>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div ng-show="part" class="additional">
        <kz-order-info part="part"></kz-order-info>
      </div>
    </div>
  </div>
</div>